<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.org">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="/static/fancy.css">
<TITLE>OSMS服务器管理系统</TITLE>
</HEAD><BODY BGCOLOR="white" TEXT="black">
<CENTER>
<H1>OSMS服务器管理系统</H1>
<FONT SIZE="4"><I>作者: roy@rootk.com</I></FONT><BR>
<FONT SIZE="4">2012/10/29</FONT>
</CENTER>

<P></P>
<HR NOSHADE SIZE=1>
<P></P>

  <UL>
  <LI><A HREF="#toc1">1. 项目介绍</A>
  <LI><A HREF="#toc2">2. 结构</A>
    <UL>
    <LI><A HREF="#toc3">2.1. 结构图</A>
    <LI><A HREF="#toc4">2.2. 结构说明</A>
    </UL>
  <LI><A HREF="#toc5">3. 功能说明</A>
    <UL>
    <LI><A HREF="#toc6">3.1. Agent功能</A>
    <LI><A HREF="#toc7">3.2. WEB客户端</A>
    </UL>
  <LI><A HREF="#toc8">4. 功能截图</A>
    <UL>
    <LI><A HREF="#toc9">4.1. 设备列表</A>
    <LI><A HREF="#toc10">4.2. 自动安装监控端</A>
    <LI><A HREF="#toc11">4.3. 自动登录SSH</A>
    <LI><A HREF="#toc12">4.4. 安装软件包</A>
    <LI><A HREF="#toc13">4.5. 管理crontab</A>
    <LI><A HREF="#toc14">4.6. 关机/重启</A>
    </UL>
  <LI><A HREF="#toc15">5. 开发过程</A>
  <LI><A HREF="#toc16">6. 应用情况</A>
  </UL>

<P></P>
<HR NOSHADE SIZE=1>
<P></P>

<A NAME="toc1"></A>
<H1>1. 项目介绍</H1>

<P>
通过在Linux服务器上安装Agent监控端，实现对服务器信息获取、软件安装、SSH登录、系统管理的功能。使用Django 1.3框架和python 2.7；
</P>

<A NAME="toc2"></A>
<H1>2. 结构</H1>

<A NAME="toc3"></A>
<H2>2.1. 结构图</H2>

<P>
<IMG ALIGN="middle" SRC="/static/images/osms/OSMS.png" BORDER="0" ALT="">
</P>

<A NAME="toc4"></A>
<H2>2.2. 结构说明</H2>

<UL>
<LI>每台linux服务器上运行监控端，守候在指定的TCP端口，接收并处理请求；
<LI>WEB用户通过socket client与agent传输文件、获取服务器信息等；
<LI>使用python-paramiko将agent传输到服务器上，并运行；
<LI>使用python-pexpect连接到SSH服务器，并使用ajaxterm将终端程序扩展到WEB页面；
<LI>使用MySQL做数据持久化。
</UL>

<A NAME="toc5"></A>
<H1>3. 功能说明</H1>

<A NAME="toc6"></A>
<H2>3.1. Agent功能</H2>

<UL>
<LI>执行系统命令；
<LI>获得系统信息；
<LI>多线程执行任务；
<LI>上传下载文件；
<LI>判断客户端权限。
</UL>

<A NAME="toc7"></A>
<H2>3.2. WEB客户端</H2>

<UL>
<LI>自动安装监控端；
<LI>自动判断被监控段是否在线；
<LI>自动登录SSH；
<LI>发送安装包给被监控端，启用后台线程安装；
<LI>管理crontab；
<LI>远程关机、重启。
</UL>

<A NAME="toc8"></A>
<H1>4. 功能截图</H1>

<A NAME="toc9"></A>
<H2>4.1. 设备列表</H2>

<P>
<IMG ALIGN="middle" SRC="/static/images/osms/1.jpeg" BORDER="0" ALT="">
</P>

<A NAME="toc10"></A>
<H2>4.2. 自动安装监控端</H2>

<P>
<IMG ALIGN="middle" SRC="/static/images/osms/2.jpeg" BORDER="0" ALT="">
<IMG ALIGN="middle" SRC="/static/images/osms/3.jpeg" BORDER="0" ALT="">
</P>

<A NAME="toc11"></A>
<H2>4.3. 自动登录SSH</H2>

<P>
<IMG ALIGN="middle" SRC="/static/images/osms/4-1.jpeg" BORDER="0" ALT="">
</P>
<P>
<IMG ALIGN="middle" SRC="/static/images/osms/4.jpeg" BORDER="0" ALT="">
</P>

<A NAME="toc12"></A>
<H2>4.4. 安装软件包</H2>

<P>
<IMG ALIGN="middle" SRC="/static/images/osms/5.jpeg" BORDER="0" ALT="">
</P>
<P>
<IMG ALIGN="middle" SRC="/static/images/osms/6.jpeg" BORDER="0" ALT="">
</P>

<A NAME="toc13"></A>
<H2>4.5. 管理crontab</H2>

<P>
<IMG ALIGN="middle" SRC="/static/images/osms/7.jpeg" BORDER="0" ALT="">
</P>

<A NAME="toc14"></A>
<H2>4.6. 关机/重启</H2>

<P>
<IMG ALIGN="middle" SRC="/static/images/osms/8.jpeg" BORDER="0" ALT="">
</P>

<A NAME="toc15"></A>
<H1>5. 开发过程</H1>

<UL>
<LI>接到原始需求，主要是将服务器管理方面的常见任务，做到自动化、可视化；
<LI>确定使用Django框架，开发平台为linux；
<LI>使用C/S模式，Linux服务器运行被监控端，WEB客户端使用socket连接；
<LI>实现将监控Agent发送到服务器，并自动运行；
<LI>实现被监控端的常见系统信息获取、上传下载文件、运行任务等；
<LI>实现WEB客户端的各项功能；
<LI>使用python-paramiko通过SSH方式连接到服务器，将打包好的监控Agent发送到服务器，并运行它；
<LI>使用python-pexpect连接到SSH服务器，ajaxterm将pexpect的shell程序扩展到WEB页面；
<LI>通过上传下载文件管理crontab。
</UL>

<A NAME="toc16"></A>
<H1>6. 应用情况</H1>

<UL>
<LI>展示的版本只是当初开发的一个最初的版本，目前此系统已经在给某在线教育公司做服务器管理，服务器规模为50台左右。
</UL>

<!-- html code generated by txt2tags 2.6 (http://txt2tags.org) -->
<!-- cmdline: txt2tags -t html index.t2t -->
</BODY></HTML>
